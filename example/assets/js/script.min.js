!function(e,t){var i=[],n=function(e,t){this.selectorElem=e,this.elemWidth=t.elemWidth,this.marginWidth=t.marginWidth,this.itemSelector=t.itemSelector,this.beforImgLoading=t.beforImgLoading,this.LoadComplete=t.LoadComplete};return n.prototype={constructor:n,selector:function(e){switch(this.elements=[],e.charAt(0)){case"#":this.elements.push(document.getElementById(e.substring(1)));break;case".":this.elements=document.getElementsByClassName(e.substring(1));break;default:this.elements=document.getElementsByTagName(e)}return this.elements},setAttr:function(e,t){var i="";for(var n in t)i=i+n+":"+t[n]+";";return e.setAttribute("style",i)},imgLoadComplete:function(e,t){for(var i=this,n=[],o=0,r=e.length,s=!1,m=0;m<r;m++)n[m]=new Image,n[m].src=e[m],n[m].onload=function(){o++,o===r&&(i.LoadComplete(),t(),s=!0)};s===!1&&i.beforImgLoading()},minNum:function(e){for(var t=e[0],i=0,n=1;n<e.length;n++)e[n]<t&&(t=e[n],i=n);return{min:t,index:i}},init:function(){for(var e=this,t=e.selector(e.itemSelector),n=t.length,o=e.selector(e.selectorElem)[0].clientWidth,r=parseInt(o/(e.elemWidth+e.marginWidth)),s=[],m=0,l=0,a=[],d=0;d<n;d++){var c=t[d].children[0].children[0].src;s.push(c)}this.imgLoadComplete(s,function(){e.setAttr(e.selector(e.selectorElem)[0],{position:"relative"});for(var o=0;o<n;o++)if(void 0!==typeof t[o].children){t[o].children;i.push(t[o].clientHeight),o<r?(a.push(t[o].clientHeight),l=o):(m=e.minNum(a).min,l=e.minNum(a).index,a[l]=m+e.marginWidth+i[o]),e.setAttr(t[o],{position:"absolute",top:a[l]-t[o].clientHeight+"px",left:(e.elemWidth+e.marginWidth)*(l%r)+"px"})}})}},"undefined"!=typeof window&&(window.masonry=n),n}(window),function(){var e="";new masonry(".grid",{elemWidth:410,marginWidth:25,itemSelector:".grid-item",beforImgLoading:function(){e=document.getElementsByClassName("grid-list")[0].innerHTML,document.getElementsByClassName("grid-list")[0].innerHTML="图片正在加载中..."},LoadComplete:function(){document.getElementsByClassName("grid-list")[0].innerHTML=e}}).init()}();